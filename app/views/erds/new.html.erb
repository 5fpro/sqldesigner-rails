<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--
  WWW SQL Designer, (C) 2005-2012 Ondrej Zara, ondras@zarovi.cz
  Version: 2.7
  See license.txt for licencing information.
-->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>WWW SQL Designer</title>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link rel="stylesheet" type="text/css" href="/styles/style.css" media="all" />     
  <!--[if IE 6]><link rel="stylesheet" type="text/css" href="styles/ie6.css" /><![endif]-->
  <!--[if IE 7]><link rel="stylesheet" type="text/css" href="styles/ie7.css" /><![endif]-->
  <link rel="stylesheet" href="/styles/print.css" type="text/css" media="print" />
  <script type="text/javascript" src="/js/oz.js"></script>
  <script type="text/javascript" src="/js/config.js"></script>
  <script type="text/javascript" src="/js/wwwsqldesigner.js"></script>
  <%= csrf_meta_tags %>
</head>

<body>
  <div id="area"></div>

  <div id="controls">
    <div id="bar">
      <div id="toggle"></div>
      <%- if user_signed_in? %>
        <input type="button" id="saveload" />
      <%- end %>

      <hr/>

      <input type="button" id="addtable" />
      <input type="button" id="edittable" />
      <input type="button" id="tablekeys" />
      <input type="button" id="removetable" />
      <input type="button" id="aligntables" />
      <input type="button" id="cleartables" />
    
      <hr/>
    
      <input type="button" id="addrow" />
      <input type="button" id="editrow" />
      <input type="button" id="uprow" class="small" /><input type="button" id="downrow" class="small"/>
      <input type="button" id="foreigncreate" />
      <input type="button" id="foreignconnect" />
      <input type="button" id="foreigndisconnect" />
      <input type="button" id="removerow" />
    
      <hr/>
    
      <input type="button" id="options" />
      <a href="http://code.google.com/p/wwwsqldesigner/w/list" target="_blank"><input type="button" id="docs" value="" /></a>
      <hr/>
      <%- if user_signed_in? %>
        <a href="<%= erds_path %>"><input type="button" id="mypage" value="" /></a>
        <a href="<%= user_logout_path %>"><input type="button" id="logout" value="" /></a>
      <% else %>
        <a href="<%= new_user_session_path %>"><input type="button" id="login" value="" /></a>
      <% end %>
    </div>
  
    <div id="rubberband"></div>

    <div id="minimap"></div>
  
    <div id="background"></div>
  
    <div id="window">
      <div id="windowtitle"><img id="throbber" src="/images/throbber.gif" alt="" title=""/></div>
      <div id="windowcontent"></div>
      <input type="button" id="windowok" />
      <input type="button" id="windowcancel" />
    </div>
  </div> <!-- #controls -->
  
  <div id="opts">
    <table>
      <tbody>
        <tr>
          <td>
            * <label id="language" for="optionlocale"></label>
          </td>
          <td>
            <select id="optionlocale"><option></option></select>
          </td>
        </tr>
        <tr>
          <td>
            * <label id="db" for="optiondb"></label> 
          </td>
          <td>
            <select id="optiondb"><option></option></select>
          </td>
        </tr>
        <tr>
          <td>
            <label id="snap" for="optionsnap"></label> 
          </td>
          <td>
            <input type="text" size="4" id="optionsnap" />
            <span class="small" id="optionsnapnotice"></span>
          </td>
        </tr>
        <tr>
          <td>
            <label id="pattern" for="optionpattern"></label> 
          </td>
          <td>
            <input type="text" size="6" id="optionpattern" />
            <span class="small" id="optionpatternnotice"></span>
          </td>
        </tr>
        <tr>
          <td>
            <label id="hide" for="optionhide"></label> 
          </td>
          <td>
            <input type="checkbox" id="optionhide" />
          </td>
        </tr>
        <tr>
          <td>
            * <label id="vector" for="optionvector"></label> 
          </td>
          <td>
            <input type="checkbox" id="optionvector" />
          </td>
        </tr>
        <tr>
          <td>
            * <label id="showsize" for="optionshowsize"></label> 
          </td>
          <td>
            <input type="checkbox" id="optionshowsize" />
          </td>
        </tr>
        <tr>
          <td>
            * <label id="showtype" for="optionshowtype"></label> 
          </td>
          <td>
            <input type="checkbox" id="optionshowtype" />
          </td>
        </tr>
      </tbody>
    </table>

    <hr />

    * <span class="small" id="optionsnotice"></span>
  </div>
  
  <div id="io">
    <table>
      <tbody>
        <tr>
          <td>
            <fieldset>
              <legend id="client"></legend>
              <input type="button" id="clientsave" /> 
              <input type="button" id="clientload" />
              <input type="button" id="clientlocalsave" />
              <input type="button" id="clientlocalload" />
              <hr/>
              <input type="button" id="clientsql" />
            </fieldset>
          </td>
          <td>
            <fieldset>
              <legend id="server"></legend>
              <label for="backend" id="backendlabel"></label> <select id="backend"><option></option></select>
              <hr/>
              <% if @erd && !@erd.new_record? %>
                <input type="button" id="quicksave" /> 
              <% else %>
                <input type="button" id="serversave" /> 
              <% end %>
              <input type="button" id="serverload" style="display:none;" /> 
              <%- if user_signed_in? %>
                <input type="button" id="serverlist" /> 
                <input onclick="location.href='<%= erds_path %>'" type="button" id="erdslist" />
              <% end %>              
              
              <input type="button" id="serverimport" style="display:none" /> 
            </fieldset>
          </td>
        </tr>
        <tr>
          <td colspan="2">
            <fieldset>
              <legend id="output"></legend>
              <textarea id="textarea" rows="1" cols="1"></textarea><!--modified by javascript later-->
            </fieldset>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  
  <div id="keys">
    <fieldset>
      <legend id="keyslistlabel"></legend> 
      <select id="keyslist"><option></option></select>
      <input type="button" id="keyadd" />
      <input type="button" id="keyremove" />
    </fieldset>
    <fieldset>
      <legend id="keyedit"></legend>
      <table>
        <tbody>
          <tr>
            <td>
              <label for="keytype" id="keytypelabel"></label>
              <select id="keytype"><option></option></select>
            </td>
            <td></td>
            <td>
              <label for="keyname" id="keynamelabel"></label>
              <input type="text" id="keyname" size="10" />
            </td>
          </tr>
          <tr>
            <td colspan="3"><hr/></td>
          </tr>
          <tr>
            <td>
              <label for="keyfields" id="keyfieldslabel"></label><br/>
              <select id="keyfields" size="5" multiple="multiple"><option></option></select>
            </td>
            <td>
              <input type="button" id="keyleft" value="&lt;&lt;" /><br/>
              <input type="button" id="keyright" value="&gt;&gt;" /><br/>
            </td>
            <td>
              <label for="keyavail" id="keyavaillabel"></label><br/>
              <select id="keyavail" size="5" multiple="multiple"><option></option></select>
            </td>
          </tr>
        </tbody>
      </table>
    </fieldset>
  </div>
  
  <div id="table">
    <table>
      <tbody>
        <tr>
          <td>
            <label id="tablenamelabel" for="tablename"></label>
          </td>
          <td>
            <input id="tablename" type="text" />
          </td>
        </tr>
        <tr>
          <td>
            <label id="tablecommentlabel" for="tablecomment"></label> 
          </td>
          <td>
            <textarea rows="5" cols="40" id="tablecomment"></textarea>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  
  <script type="text/javascript">
    var d = new SQL.Designer();
  </script>
</body>
</html>
